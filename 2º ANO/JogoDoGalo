#include <iostream>
using namespace std;

struct Player {
    string nome;
    char simbolo;
};



void criarJogadores(Player &p1, Player &p2) {
    cout << "Digite o nome do Jogador 1: ";
    cin >> p1.nome;
    cout << "Escolha um simbolo (x ou o): ";
    cin >> p1.simbolo;

    cout << "Digite o nome do Jogador 2: ";
    cin >> p2.nome;
    cout << "Escolha um simbolo (x ou o): ";
    cin >> p2.simbolo;
}



const int LINHAS = 3;
const int COLUNAS = 3;

void mostraGrelha(char tabuleiro[LINHAS][COLUNAS]) {
    cout << endl;
    for (int i = 0; i < LINHAS; i++) {
        for (int j = 0; j < COLUNAS; j++) {
            cout << " " << tabuleiro[i][j];
            if (j < 2) cout << " [";
        }
        cout << endl;
        if (i < 2) cout << "--- --- ---" << endl;
    }
    cout << endl;
}

// Verifica vitÃ³ria
bool ganhou(char t[LINHAS][COLUNAS], char s) {
    for (int i = 0; i < LINHAS; i++)
        if (t[i][0] == s && t[i][1] == s && t[i][2] == s)
            return true;

    for (int j = 0; j < COLUNAS; j++)
        if (t[0][j] == s && t[1][j] == s && t[2][j] == s)
            return true;

    if (t[0][0] == s && t[1][1] == s && t[2][2] == s)
        return true;
    if (t[0][2] == s && t[1][1] == s && t[2][0] == s)
        return true;

    return false;
}

int main() {
    Player p1, p2;
    criarJogadores(p1, p2);

    char tabuleiro[LINHAS][COLUNAS];
    for (int i = 0; i < LINHAS; i++)
        for (int j = 0; j < COLUNAS; j++)
            tabuleiro[i][j] = ' ';

    Player atual = p1;
    int jogadas = 0;
    bool fim = false;

    while (!fim) {
        mostraGrelha(tabuleiro);

        int l, c;
        cout << atual.nome << " (" << atual.simbolo << "), escolhe a linha (1-3): ";
        cin >> l;
        cout << "Escolha coluna (1-3): ";
        cin >> c;
         l--; 
         c--;

        if (l < 0 || l > 2 || c < 0 || c > 2 || tabuleiro[l][c] != ' ') {
            cout << "Jogada impossivel! Tenta outra.\n";
            continue;
        }

        tabuleiro[l][c] = atual.simbolo;
        jogadas++;

        if (ganhou(tabuleiro, atual.simbolo)) {
            mostraGrelha(tabuleiro);
            cout << atual.nome << " ganhou!" << endl;
            fim = true;

        } else if (jogadas == 9) {
            mostraGrelha(tabuleiro);
            cout << "Empate" << endl;
            fim = true;

        } if (atual.nome == p1.nome) {
            atual = p2;
        } else {
            atual = p1;
        }


    }

    return 0;
}

