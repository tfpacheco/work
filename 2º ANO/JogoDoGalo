#include <iostream>
using namespace std;

struct Player {
    string nome;
    char simbolo;
};

void criarJogadores(Player &p1, Player &p2) {
    cout << "Digite o nome do Jogador 1: ";
    cin >> p1.nome;
    cout << "Escolha um simbolo (x ou o): ";
    cin >> p1.simbolo;

    cout << "Digite o nome do Jogador 2: ";
    cin >> p2.nome;
    cout << "Escolha um simbolo (x ou o): ";
    cin >> p2.simbolo;
}

void fazGrelha(char t[3][3]) {
    for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 3; j++) {
            cout << " " << t[i][j] << " ";
            if (j < 2) cout << "[";
        }
        cout << endl;
        if (i < 2) cout << "--- --- ---" << endl;
    }
cout << endl;
}


bool ganhou(char t[3][3], char s) {

    for (int i = 0; i < 3; i++)
    if ((t[i][0] == s && t[i][1] == s && t[i][2] == s) || (t[0][i] == s && t[1][i] == s && t[2][i] == s)){
        return true;
}

    if ((t[0][0] == s && t[1][1] == s && t[2][2] == s) || (t[0][2] == s && t[1][1] == s && t[2][0] == s)){
        return true;
}else{
        return false;
}
}

    

int main() {
    Player p1, p2;
    criarJogadores(p1, p2);

    char tabuleiro[3][3];
    for (int i = 0; i < 3; i++)
        for (int j = 0; j < 3; j++)
            tabuleiro[i][j] = ' ';

    Player atual = p1;
    int jogadas = 0;
    bool fim = false;

    while (!fim) {
        fazGrelha(tabuleiro);

        int l, c;
        cout << atual.nome << " " << atual.simbolo << " linha 1-3: ";
        cin >> l;
        cout << "Coluna 1-3: ";
        cin >> c;
        l--; c--;

        if (l < 0 || l > 2 || c < 0 || c > 2 || tabuleiro[l][c] != ' ') {
            cout << "Jogada invalida!" << endl;
            continue;
        }

        tabuleiro[l][c] = atual.simbolo;
        jogadas++;

        if (ganhou(tabuleiro, atual.simbolo)) {
            fazGrelha(tabuleiro);
            cout << atual.nome << " ganhou!" << endl;
            fim = true;
        } else if (jogadas == 9) {
            fazGrelha(tabuleiro);
            cout << "Empate" << endl;
            fim = true;
        } else {
            if (atual.nome == p1.nome)
                atual = p2;
            else
                atual = p1;
        }
    }
}
